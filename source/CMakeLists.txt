cmake_minimum_required (VERSION 3.10)
project (muondetector)

option(MUONDETECTOR_BUILD_TIDY "Execute clang-tidy when building the project" OFF)
option(MUONDETECTOR_BUILD_GUI "Build the gui subproject" ON)

if(WIN32)
set(QWT_DIR "C:/Qwt-6.1.4/")
set(CRYPTOPP_DIR "C:/cryptopp/")
set(MQTT_CPP_DIR "C:/paho-mqtt-cpp-1.1.0-win64")
set(MQTT_C_DIR "C:/eclipse-paho-mqtt-c-win64-1.3.6")
list(APPEND CMAKE_PREFIX_PATH "C:/Qt/5.15.1/msvc2019_64/lib/cmake/Qt5")
link_directories("${MQTT_CPP_DIR}/lib" "${MQTT_C_DIR}/lib" "${QWT_DIR}/lib" "${CRYPTOPP_DIR}/lib")
endif()

set(CMAKE_BUILD_TYPE Debug)
message("${CMAKE_HOST_SYSTEM_PROCESSOR}")
add_subdirectory(library)
if (MUONDETECTOR_BUILD_GUI)
add_subdirectory(gui)
endif (MUONDETECTOR_BUILD_GUI)
if (${CMAKE_HOST_SYSTEM_PROCESSOR} STREQUAL "armv7l")
add_subdirectory(daemon)
else (${CMAKE_HOST_SYSTEM_PROCESSOR} STREQUAL "armv7l")
option(MUONDETECTOR_BUILD_TOOLS "Build the tools subproject" ON)
if (MUONDETECTOR_BUILD_TOOLS)
add_subdirectory(tools)
endif (MUONDETECTOR_BUILD_TOOLS)
endif (${CMAKE_HOST_SYSTEM_PROCESSOR} STREQUAL "armv7l")
